(function(){var b=new Date(),a;$.fn.dateplug=function(d){var e=$.extend({},$.fn.dateplug.defaults,d);var f=b.getMonth()+1;return this.each(function(){var g=$(this);g.html(c(e));if(!e.showBtn){g.find(".next-mon,.prev-mon").hide()}else{g.on("click",".next-mon,.prev-mon",function(){a=e;if($(this).hasClass("next-mon")){if(a.month==12){a.month=1;a.year=a.year+1}else{a.month=a.month+1}}else{if(a.month==1){a.month=12;a.year=a.year-1}else{a.month=a.month-1}}g.html(c(a))})}g.on("click","#pick-up",function(){g.slideUp()})})};$.fn.dateplug.defaults={year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),showBtn:true,price:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};function c(d){var h='<table class="kalendar-table" border="0" cellpadding="0" cellspacing="0"><thead><tr><td colspan="7"><a href="javascript:;" class="pull-left prev-mon"><</a>'+d.year+"年"+d.month+'月<a href="javascript:;" class="pull-right next-mon">></a><div class="border"></div> </td></tr></thead><tbody>';var m=new Date();m.setFullYear(d.year,d.month,0),days=m.getDate();m.setDate(1);first_day=(m.getDay()==0?7:m.getDay())-1;var l=Math.ceil((days+first_day)/7);for(var g=0;g<l;g++){for(var f=0;f<7;f++){if(f==0){h+="<tr>"}var e=g*7+f+1,n=e-first_day,k=d.price[n-1]<=0?"&nbsp;":("￥"+d.price[n-1]);if(first_day<e&&e<=days+first_day){h+="<td><p>"+n+'</p><p class="price">'+k+"</p></td>"}else{h+="<td></td>"}if(f==6){h+="</tr>"}}}h+='</tbody></table><a id="pick-up" class="pick-up" href="javascript:void(0);"><i></i>收起特价日历</a>';return h}})(jQuery);