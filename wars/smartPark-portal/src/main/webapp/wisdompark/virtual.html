<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>虚拟园区</title>
<link href="../styles/page/awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet">
<link href="../styles/base.css" type="text/css" rel="stylesheet">
<link href="../styles/page/page.css" type="text/css" rel="stylesheet">
<!-- <link rel="stylesheet" type="text/css" href="../styles/page/zs.css"> -->
<style>
	.czkj{background:url(../styles/images/zhyq/zckj.png) no-repeat;width:117px;height:36px;position:absolute;top:462px;left:585px;
		animation:my 1s infinite alternate;-webkit-animation:my 1s infinite alternate;}
	@keyframes my
	{
	from {opacity:1;}
	to {opacity:0;}
	}

	@-webkit-keyframes my
	{
	from {opacity:1;}
	to {opacity:0;}
	}
	.subul{z-index: 99;position: relative;}
	.build-bg{margin-top:30px;position:relative;background:url(../styles/images/zhyq/2.jpg)no-repeat;height:680px;}
	.b-o{width: 338px;height: 485px;top: 88px;left: 696px;position: absolute;}
	.build-one{background: url(../styles/images/zhyq/b1.png) no-repeat;width: 100%;height: 100%;}
	.b-t{width: 712px;height: 516px;top: 64px;left: 102px;position: absolute;}
	.build-two{background: url(../styles/images/zhyq/b2.png) no-repeat;width: 100%;height: 100%}
	.build div{position: absolute;}
	.b1f1{bottom: 0px;right: 24px;width: 201px;height: 28px;}
	.b1f2{bottom: 22px;right: 24px;width: 201px;height: 27px;}
	.b1f3{bottom: 40px;right: 24px;width:199px;height: 32px;}
	.b1f4{bottom: 58px;right: 24px;width: 198px;height: 41px;}
	.b1f5{bottom: 80px;right: 24px;width: 199px;height: 41px;}
	.b1f6{bottom: 98px;right: 24px;width: 199px;height: 44px;}
	.b1f7{bottom: 114px;right: 24px;width: 199px;height: 49px;}
	.b1f8{bottom: 130px;right: 24px;}
	.b1f9{bottom: 147px;right: 24px;}
	.b1f10{bottom: 167px;right: 24px;}
	.b1f11{bottom: 184px;right: 24px;}
	.b1f12{bottom: 202px;right: 24px;}
	.b1f13{bottom: 221px;right: 24px;}
	.b1f14{bottom: 237px;right: 24px;}
	.b1f15{bottom: 257px;right: 24px;}
	.b1f16{bottom: 275px;right: 24px;}
	.b1f17{bottom: 293px;right: 24px;}
	.b1f18{bottom: 312px;right: 24px;}
	.b1f19{bottom: 330px;right: 24px;}
	.b1f20{bottom: 346px;right: 24px;}

	.b2f1{bottom: 1px;right: 3px;width: 649px;height: 71px;}
	.b2f2{bottom: 42px;right: 3px;width: 652px;height: 72px;}
	.b2f3{bottom: 69px;right: 4px;width: 647px;height: 87px;}
	.b2f4{bottom: 96px;right: 3px;width: 666px;height: 110px;}
	.b2f5{bottom: 123px;right: 3px;width: 666px;height: 129px;}
	.b2f6{bottom: 148px;right: 3px;width: 667px;height: 149px;}
	.b2f7{bottom: 173px;right: 3px;width: 666px;height: 170px;}
	.b2f8{bottom: 197px;right: 3px;width: 666px;height: 193px;}
	.b2f9{bottom: 224px;right: 3px;width: 667px;height: 214px;}
	.build div img{display: none;}
	.b-num .build{display: none;}
</style>
</head>

<body>
<div id="youi_page_header" class="youi-page-header clearfix" dataType="2" dataId="0"></div>
<!--***top end****************************************-->
<!--content-->
<!--*******************************************-->
<div class="w1200 build-bg" >
    <div class="zznav">
    	<ul class="oh fl zzul">
    	
        </ul>
		<div class="b-o b-num">
	       	<div class="build build-one">
	        	<div class="b1f1 bof"><img src="../styles/images/zhyq/b1f1.png" alt=""></div>
				<div class="b1f2 bof"><img src="../styles/images/zhyq/b1f2.png" alt=""></div>
				<div class="b1f3"><img src="../styles/images/zhyq/b1f3.png" alt=""></div>
				<div class="b1f4"><img src="../styles/images/zhyq/b1f4.png" alt=""></div>
				<div class="b1f5"><img src="../styles/images/zhyq/b1f5.png" alt=""></div>
				<div class="b1f6"><img src="../styles/images/zhyq/b1f6.png" alt=""></div>
				<div class="b1f7"><img src="../styles/images/zhyq/b1f7.png" alt=""></div>
				<div class="b1f8"><img src="../styles/images/zhyq/b1f8.png" alt=""></div>
				<div class="b1f9"><img src="../styles/images/zhyq/b1f9.png" alt=""></div>
				<div class="b1f10"><img src="../styles/images/zhyq/b1f10.png" alt=""></div>
				<div class="b1f11"><img src="../styles/images/zhyq/b1f11.png" alt=""></div>
				<div class="b1f12"><img src="../styles/images/zhyq/b1f12.png" alt=""></div>
				<div class="b1f13"><img src="../styles/images/zhyq/b1f13.png" alt=""></div>
				<div class="b1f14"><img src="../styles/images/zhyq/b1f14.png" alt=""></div>
				<div class="b1f15"><img src="../styles/images/zhyq/b1f15.png" alt=""></div>
				<div class="b1f16"><img src="../styles/images/zhyq/b1f16.png" alt=""></div>
				<div class="b1f17"><img src="../styles/images/zhyq/b1f17.png" alt=""></div>
				<div class="b1f18"><img src="../styles/images/zhyq/b1f18.png" alt=""></div>
				<div class="b1f19"><img src="../styles/images/zhyq/b1f19.png" alt=""></div>
				<div class="b1f20"><img src="../styles/images/zhyq/b1f20.png" alt=""></div>
	        </div>
	    </div>
	    <div class="b-t b-num">
		    <div class="build build-two">
			    <div class="b2f1 bof"><img src="../styles/images/zhyq/b2f1.png" alt=""></div>
				<div class="b2f2 bof"><img src="../styles/images/zhyq/b2f2.png" alt=""></div>
				<div class="b2f3"><img src="../styles/images/zhyq/b2f3.png" alt=""></div>
				<div class="b2f4"><img src="../styles/images/zhyq/b2f4.png" alt=""></div>
				<div class="b2f5"><img src="../styles/images/zhyq/b2f5.png" alt=""></div>
				<div class="b2f6"><img src="../styles/images/zhyq/b2f6.png" alt=""></div>
				<div class="b2f7"><img src="../styles/images/zhyq/b2f7.png" alt=""></div>
				<div class="b2f8"><img src="../styles/images/zhyq/b2f8.png" alt=""></div>
				<div class="b2f9"><img src="../styles/images/zhyq/b2f9.png" alt=""></div>
		    </div>
	    </div>
    </div>
	<!--这里自己调用 页面加载动态效果-->	
	<div class="clearfix undis" id="loading">
		<div id="contain">
		    <div class='wrap' id='wrap1'>
		    	<div class='part' id='part1'></div>
		    </div>
		    
		    <div class='wrap' id='wrap2'>
		    	<div class='part' id='part2'></div>
		    </div>
		    
		    <div class='wrap' id='wrap3'>
		    	<div class='part' id='part3'></div>
		    </div>
		    
		    <div class='wrap' id='wrap4'>
		    	<div class='part' id='part4'></div>
		    </div>
		</div>
	</div>				 
	<div class="czkj"></div>
</div>
<!--*******************************************-->
    
<!--***bottom start****************************************-->
	<div id="youi_page_footer" class="youi-page-footer"></div>
<!--***bottom end****************************************-->
<!--******************  code end  ****************************-->
<script type="text/javascript" src="../scripts/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../scripts/lib/jquery-ui.min.js"></script>
<script type="text/javascript" src="../scripts/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="../scripts/lib/giui.min.js"></script>
<script type="text/javascript" src="../scripts/page/pagewrapper.js"></script>
<script type="text/javascript" src="../scripts/page/url.js"></script>
<script>
	$(function(){
		$(document).on("mouseover mouseout",".zzul .b1",function(){
			$(".b-o .build").toggle();
		});
		$(document).on("mouseover",".y1",function(){
			var buildingId = $(this).parent().attr("id") ;
			findFloorList(buildingId) ;
		});
		$(document).on("mouseover mouseout",".zzul .b1 li",function(){
			var index = $(this).index() + 2 ;
			$(".b-o .build div").eq(index).find("img").toggle();
		});
		$(document).on("mouseover mouseout",".zzul .b2",function(){
			$(".b-t .build").toggle();
		});
		$(document).on("mouseover mouseout",".zzul .b2 li",function(){
			var index = $(this).index() + 2 ;
			$(".b-t .build div").eq(index).find("img").toggle();
		});
		$(document).on("mouseover mouseout",".build div:not(.bof)",function(){
			
				$(this).find("img").toggle();
			
		});
		/*$(document).on("mouseover mouseout",".b-num",function(){
			$(this).find(".build").toggle();
		});*/
		$(document).on("click",".build div",function(){
			location.href = "wp_login.html?floorId="+$(this).attr("value");
		});
		
	});
/* 	$(function(){
		$(document).on("mouseover",".b",function(){
			var buildingId = $(this).parent().attr("id") ;
			findFloorList(buildingId) ;
		});	
		$(document).on("mouseover",".zzul .lin",function(){
			if($(this).index()==0){
				$(".b1mask").removeClass("hide");
			}else if($(this).index()==1){
				$(".b2mask").removeClass("hide");
			}
		});
		$(document).on("mouseout",".zzul .lin",function(){
			$(".b1mask").addClass("hide");
			$(".b2mask").addClass("hide");
			$(".b1floor").addClass("hide");
			$(".b2floor").addClass("hide");
		});
		$(document).on("mouseover",".maskset",function(){
			$(".b1mask").addClass("hide");
			$(".b2mask").addClass("hide");
			$(".b1floor").addClass("hide");
			$(".b2floor").addClass("hide");
			//$(".b1floor").eq(0).addClass("hide");
		});

		$(document).on("mouseover",".zzul .lin:eq(0) li",function(){
			var idx=$(this).index()+2;
			$(".b1floor").eq(idx).removeClass("hide").siblings().addClass("hide");
		});
		$(document).on("mouseover",".zzul .lin:eq(1) li",function(){
			var idx=$(this).index()+2;
			$(".b2floor").eq(idx).removeClass("hide").siblings().addClass("hide");
		});
	}); */
</script>
	<script type="text/javascript">
		/* $(".zznav").hide() ;
		$("#loading").removeClass("undis") ; */
		$(function(){
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"bbmParkManager/getBbmParks.json",//得到所有的园区
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(result){
					if(result.records.length > 0){
						var park = result.records[0] ;//获取第一个园区
						var parkId = park.parkId ;//得到园区ID
						var params = ["parkId="+parkId];
						$.youi.ajaxUtils.ajax({
							url:baseUrl +"bbmBuildingManager/getAllBuildingByParkId.json",//通过园区ID来获取该园区所有楼栋
							data:params.join('&'),
							jsonp:'data:jsonp',
							dataType:'jsonp',
							success:function(result){
								 if(result&&result.records){
									_parseRecords(result.records) ;
								} 
							}
						});
					}
				} 
			});
		});
		function _parseRecords(record){//record为楼栋的list
			for(var i=0;i<record.length;i++){
				var obj = record[i] ;
				var index = i+1;
				var t = "b"+index ;
				var	html = "<li class="+ t +" id="+obj.buildingId+"><a class='y1' href='#'>"+obj.buildingName+"</a><ul class='subul'></ul></li>"
				$(".oh.fl.zzul").append(html);
				/* if(i == 0){
					$(".build-one").attr("value",obj.buildingId) ;
				}else if(i == 1){
					$(".build-two").attr("value",obj.buildingId) ;
				} */
				//addAttr(index,obj.buildingId) ;
			}
				$("#loading").addClass("undis") ;
				$(".zznav").show() ;
		}
		
		/* 初始化时，给楼层加载floorId */
		/* function addAttr(index,buildingId){
			var params = ["buildingId="+buildingId];
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"bbmFloorManager/getBbmFloorByBuildingId.json",
				data:params.join('&'),
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(result){
					if(result&&result.records){
						addAttr_1(index,result.records) ;
					}
				}
			});
		}
		
		function addAttr_1(index,records){
			if(index == 1){
				$(".build-one >div").each(function(i){
					for(var j=0;j<records.length;j++){
						var floorId = records[j].floorId ;
						if(i == j){
							$(this).attr("value",floorId) ;
						}
					}
				});
			}else if(index == 2){
				$(".build-two >div").each(function(i){
					for(var j=0;j<records.length;j++){
						var floorId = records[j].floorId ;
						if(i == j){
							$(this).attr("value",floorId) ;
						}
					}
				});
			}
			
		} */
		
		function findFloorList(buildingId){
			var params = ["buildingId="+buildingId];
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"bbmFloorManager/getBbmFloorByBuildingId.json",
				data:params.join('&'),
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(result){
					if(result&&result.records){
						var html = appendHtml(result.records) ;
						$("#"+buildingId).find(".subul").empty();
						$("#"+buildingId).find(".subul").append(html) ;
					}
				}
			});
		}
		function appendHtml(record){
			var html = "";
			for(var i=0;i<record.length;i++){
				var obj = record[i] ;
				var num = obj.floorNo ;
				if(num == "1F" || num == "2F"){
					
				}else{
					html += "<li id="+obj.floorId+"><a href='wp_login.html?floorId="+obj.floorId+"'>"+obj.floorNo+"</a></li>" ;
				}
			}
			return html ;
		}
	</script>
</body>
</html>
