<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>车辆租凭</title>
<link href="../styles/page/awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet">
<link href="../styles/base.css" type="text/css" rel="stylesheet">
<link href="../styles/page/page.css" type="text/css" rel="stylesheet">
</head>

<body>
<div id="youi_page_header" class="youi-page-header clearfix"></div>
<!--***top end****************************************-->
<!--content-->
<div class="w1200 pt20">
	<ul class="linknav clearfix">
    	<li><a href="#">首页</a></li>
        <li><a href="#">企业服务</a></li>
        <li class="active"><a href="#">公共资源</a></li>
    </ul>
    <div class="resbox clearfix">
        <ul class="res_ul clearfix fr">
            <li class="active"><a href="carLease.html">车辆租凭</a></li>
            <li><a href="carVip.html">园区专车预定</a></li>
            <li><a href="advert.html">广告资源预定</a></li>
            <li><a href="room.html">会议室预定</a></li>
        </ul>
    </div>
    <!--车辆租凭-->
    <div class="res_item mb40">
    <!--     <ul class="ri_ul clearfix" id="carType">
            <div><li>车辆类型</li></div>
            <li class="active">全部</li>
            <li>自动挡</li>
            <li>手动挡</li>
        </ul> -->
          <div class="ri_ul clearfix">
            <div class="ru-title">车辆类型</div>
            <ul class="ru-options" id="carType">
               <!--  <li class="active">全部</li>
                <li>视频会议室</li>
                <li>普通会议室</li> -->
            </ul>
        </div>
           <div class="ri_ul clearfix">
            <div class="ru-title">乘坐人数</div>
            <ul class="ru-options" id="zwType">
               <!--  <li class="active">全部</li>
                <li>视频会议室</li>
                <li>普通会议室</li> -->
            </ul>
        </div>
        <!-- <ul class="ri_ul clearfix">
            <div><li>乘坐人数</li></div>
            <li class="active">不限</li>
            <li>5座以下</li>
            <li>5-9座</li>
            <li>9座以上</li>
        </ul> -->
        <div class="mt30 clearfix">
        	<!-- <div class="res_left">
           
            </div> 
            <!-- 没有数据时显示图片 star-->
            <div class="res_left">
             	<ul id="carfix">
                	<!-- <li class="clearfix">
                    	 <div class="fl"><img src="../styles/images/company/car1.jpg"/></div>
                        <div class="fl ml30" style="width:535px">
                        	<a href="carLeasexq.html" class="span_bold f20">奔驰 威亭 9座商务车</a>
                            <div class="mt20 mb20">
                            	<div class="res_tip">自动挡</div>
                                <div class="res_tip">9人座</div>
                            </div>
                            <div style="height:55px">
                            	此车仅供园区企业接送飞机使用，按照每次500元计算。此价格包含80KM油费，师傅一名工作2小时，如果是超公里使用，按照没公立5元计算。
                            </div>
                            <div class="mt30">
                            	<img class="mr10" src="../styles/images/company/res_icon.png"/><span class="vm pr20">联系人：小州</span>
                                <img class="mr10" src="../styles/images/company/res_ico.png"/><span class="vm">联系电话：134534565756</span>
                                <div class="jcbg f20 fr">&yen;500元/次</div>
                            </div>
                        </div> 
                    </li> -->
                   <!-- <li class="clearfix" id="carfix">
                    	<div class="fl"><img src="../styles/images/company/car1.jpg"/></div>
                        <div class="fl ml30" style="width:535px">
                        	<a href="carLeasexq.html" class="span_bold f20">奔驰 威亭 9座商务车</a>
                            <div class="mt20 mb20">
                            	<div class="res_tip">自动挡</div>
                                <div class="res_tip">9人座</div>
                            </div>
                            <div style="height:55px">
                            	此车仅供园区企业接送飞机使用，按照每次500元计算。此价格包含80KM油费，师傅一名工作2小时，如果是超公里使用，按照没公立5元计算。
                            </div>
                            <div class="mt30">
                            	<img class="mr10" src="../styles/images/company/res_icon.png"/><span class="vm pr20">联系人：小州</span>
                                <img class="mr10" src="../styles/images/company/res_ico.png"/><span class="vm">联系电话：134534565756</span>
                                <div class="jcbg f20 fr">&yen;160元/小时</div>
                            </div>
                        </div>
                    </li>
                    <li class="clearfix" id="carfix">
                    	<div class="fl"><img src="../styles/images/company/car2.jpg"/></div>
                        <div class="fl ml30" style="width:535px">
                        	<a href="carLeasexq.html" class="span_bold f20">奔驰 威亭 9座商务车</a>
                            <div class="mt20 mb20">
                            	<div class="res_tip">自动挡</div>
                                <div class="res_tip">9人座</div>
                            </div>
                            <div style="height:55px">
                            	此车仅供园区企业接送飞机使用，按照每次500元计算。此价格包含80KM油费，师傅一名工作2小时，如果是超公里使用，按照没公立5元计算。
                            </div>
                            <div class="mt30">
                            	<img class="mr10" src="../styles/images/company/res_icon.png"/><span class="vm pr20">联系人：小州</span>
                                <img class="mr10" src="../styles/images/company/res_ico.png"/><span class="vm">联系电话：134534565756</span>
                                <div class="jcbg f20 fr">&yen;160元/小时</div>
                            </div>
                        </div>
                    </li> -->
                </ul>
                <div class="tcdPageCode fr" >
              <!--   <div class="tr pb25 pt15"> -->
                    
                	<!-- <span class="cd7">找到相关结果约2016个</span>
                    <div class="paging active ml25">1</div>
                    <div class="paging">2</div>
                    <div class="paging">3</div>
                    <div class="paging">4</div>
                    <div class="paging">5</div>
                    <div class="paging paging_m">尾页</div> -->
                </div>
                <div class="tc" style="background:#f6f6f6;height:600px;">
                    <img src="../styles/images/none1.png" border="0" style="margin-top:200px;" />
                </div>
             </div>
            <!-- 没有数据时显示图片 end-->
            <div class="res_right">
                <div id="youi_page_right" class="youi-page-right clearfix"></div>
            </div>
        </div>
    </div><!--res_item  end-->
    <!--车辆租凭-->
</div>
<!--***bottom start****************************************-->
<div id="youi_page_footer" class="youi-page-footer"></div>
<!--***bottom end****************************************-->
<!--******************  code end  ****************************-->

<script type="text/javascript" src="../scripts/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../scripts/lib/jquery-ui.min.js"></script>
<script type="text/javascript" src="../scripts/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="../scripts/lib/giui.min.js"></script>
<script type="text/javascript" src="../scripts/page/newscom.js"></script>
<script type="text/javascript" src="../scripts/page/kefu.js"></script> 
<script type="text/javascript" src="../scripts/page/url.js"></script>
<script type="text/javascript" src="../scripts/page/pagewrapper.js"></script>
<script type="text/javascript" src="../scripts/page/jquery.page.js"></script>
<script type="text/javascript">
$(function(){
	var carType='stalls';//carType:车辆档位
	 $('#carType').select({
			template:'<li data-val={itemValue}>{itemName}</li>',
			jsonpSrc:baseUrl+"purchasingmanagerPublicManager/getRecordsByExtendValue.json?recordType="+carType
});
	
		var zwType='seat';//zwType:车辆乘坐人数
		 $('#zwType').select({
				template:'<li data-val={itemValue}>{itemName}</li>',
				jsonpSrc:baseUrl+"purchasingmanagerPublicManager/getRecordsByExtendValue.json?recordType="+zwType
	});
	 
});
	</script>
<script type="text/javascript">
var pageSize=3;
var pageCount=1;
var serviceURL = baseUrl+"publicutilitiesmanagerResoManager/getPagerPublicCommoditys.json?genreCode=0302";//0302:车辆租赁
		$(function(){
			//公共方法
			$.youi.ajaxUtils.ajax({
				url:serviceURL,
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(results){
					pageCount=Math.ceil(results.totalCount/pageSize);
					 refreshData(1,pageSize);
						$(".tcdPageCode").createPage({
						    pageCount:pageCount,
						    current:1,
						    backFn:function(p){
						       this.pageCount=pageCount;
						        refreshData(p,pageSize);
						    }
						});
				}
			});
			
		});
		//拼接活动列表
		
			function refreshData(pageIndex,pageSize){
			var params = ['pager:pageIndex='+pageIndex,'pager:pageSize='+pageSize];
			$.youi.ajaxUtils.ajax({
				url:serviceURL,
				jsonp:'data:jsonp',
				data:params.join('&'),
				dataType:'jsonp',
				success:function(results){
					if(results&&results.records){
						$('.tc').hide();
						 _parseRecords(results.records);
					}
				}
			});
		}
		
		function _parseRecords(record){
			var html='';
			for(var i=0;i<record.length;i++){
			 	if(record[i].car.dw==undefined){
			 		record[i].car.dw="";
				}
				if(record[i].car.zw==undefined){
					record[i].car.zw="";
				}
				if(record[i].car.chepai==undefined){
					record[i].car.chepai="";
				} 
				var imageUrl="../styles/images/index/car.jpg";
				if(record[i].commodityImage !=null && record[i].commodityImage!=""){
					   imageUrl=cenUrl+"common/uploadImage.html?repository=/swfupload&path="+record[i].commodityImage+"&method=show";
				}
				html+="<li class='clearfix'><div class='fl'><img src='"+imageUrl+"' height='205' width='285'></div>"+
					"<div class='fl ml30' style='width:535px'><a href='carLeasexq.html?id="+record[i].commodityId+"' class='span_bold f20'>"+record[i].commodityTitle+"</a><div class='mt20 mb20'><div class='res_tip'>"+record[i].car.dw+"</div><div class='res_tip'>"+record[i].car.zw+"</div><div class='res_tip'>"+record[i].car.chepai+"</div></div>"+
					"<div style='height:55px'>"+record[i].commodityDescribe+"</div><div class='mt30'><img class='mr10' src='../styles/images/company/res_icon.png'/><span class='vm pr20'>"+record[i].purchasingmanagerMerchant.merchantLinkman+"</span>"+
					"<img class='mr10' src='../styles/images/company/res_ico.png'/><span class='vm'>联系电话："+record[i].purchasingmanagerMerchant.merchantLinkmanPhone+"</span><div class='jcbg f20 fr'>"+record[i].commodityPrice+"元/小时</div>"+
					"</div></div></li>";
				
			}
			$('#carfix').empty();
			$("#carfix").append(html);
		};
		
		/* function _parseRecordCount(record){
			    var totalCount=record.totalCount;
				var html="<span class='cd7'>找到相关结果约"+totalCount+"个"+
				"<div class='paging active ml25'>1</div>"+
				"<div class='paging'>2</div>"+
				"<div class='paging'>3</div>"+
				"<div class='paging'>4</div>"+
				"<div class='paging'>5</div>"+
				" <div class='paging paging_m'>尾页</div>";
				 $('.pb25').append(html);
		}; */
		
	</script>
	 <script type="text/javascript">
        $(function(){
            $(document).on("load",".ru-options",function(){
                $(".ru-options li:eq(0)").addClass("active");
            })
        	var carType="";
            var zwType="";
            $(document).on("click",".ru-options li" ,function(){
                $(this).addClass("active").siblings().removeClass("active");
                var type=$(this).parents(".ri_ul").find("div:eq(0)").text();
                var selectText=$(this).text();
                var val=$(this).attr("data-val");
              if(type=="车辆类型"){
            	  if(val=="00"){
            		  carType="";
            	  }else{
            		  carType=selectText;
            	  }
            	 
              }
              if(type=="乘坐人数"){
            	  if(val=="00"){
            		  zwType="";
            	  }else{
            		  zwType=selectText;
            	  }
            	  
              }
                var pageSize=3;
                var pageCount=1;
                var serviceURL = baseUrl+"publicutilitiesmanagerResoManager/getPagerPublicCommoditys.json?genreCode=0302";//0302:车辆租赁
                		$(function(){
                			//公共方法
                			$.youi.ajaxUtils.ajax({
                				url:serviceURL,
                				jsonp:'data:jsonp',
                				dataType:'jsonp',
                				success:function(results){
                					pageCount=Math.ceil(results.totalCount/pageSize);
                					 refreshData(1,pageSize,carType,zwType);
                						$(".tcdPageCode").createPage({
                						    pageCount:pageCount,
                						    current:1,
                						    backFn:function(p){
                						       this.pageCount=pageCount;
                						        refreshData(p,pageSize,carType,zwType);
                						    }
                						});
                				}
                			});
                			
                		});
                		//拼接活动列表
                		
                			function refreshData(pageIndex,pageSize,carType,zwType){
                			var params = ['pager:pageIndex='+pageIndex,'pager:pageSize='+pageSize,'roomType='+carType,'roomGm='+zwType];
                			alert(params);
                			$.youi.ajaxUtils.ajax({
                				url:serviceURL,
                				jsonp:'data:jsonp',
                				data:params.join('&'),
                				dataType:'jsonp',
                				success:function(results){
                					if(results&&results.records){
                						$('.tc').hide();
                						 _parseRecords(results.records);
                					}
                				}
                			});
                		}
                		
                		function _parseRecords(record){
                			var html='';
                			for(var i=0;i<record.length;i++){
                			 	if(record[i].car.dw==undefined){
                			 		record[i].car.dw="";
                				}
                				if(record[i].car.zw==undefined){
                					record[i].car.zw="";
                				}
                				if(record[i].car.chepai==undefined){
                					record[i].car.chepai="";
                				} 
                				var imageUrl="../styles/images/index/car.jpg";
                				if(record[i].commodityImage !=null && record[i].commodityImage!=""){
                					   imageUrl=cenUrl+"common/uploadImage.html?repository=/swfupload&path="+record[i].commodityImage+"&method=show";
                				}
                				html+="<li class='clearfix'><div class='fl'><img src='"+imageUrl+"' height='205' width='285'></div>"+
                					"<div class='fl ml30' style='width:535px'><a href='carLeasexq.html?id="+record[i].commodityId+"' class='span_bold f20'>"+record[i].commodityTitle+"</a><div class='mt20 mb20'><div class='res_tip'>"+record[i].car.dw+"</div><div class='res_tip'>"+record[i].car.zw+"</div><div class='res_tip'>"+record[i].car.chepai+"</div></div>"+
                					"<div style='height:55px'>"+record[i].commodityDescribe+"</div><div class='mt30'><img class='mr10' src='../styles/images/company/res_icon.png'/><span class='vm pr20'>"+record[i].purchasingmanagerMerchant.merchantLinkman+"</span>"+
                					"<img class='mr10' src='../styles/images/company/res_ico.png'/><span class='vm'>联系电话："+record[i].purchasingmanagerMerchant.merchantLinkmanPhone+"</span><div class='jcbg f20 fr'>"+record[i].commodityPrice+"元/小时</div>"+
                					"</div></div></li>";
                				
                			}
                			$('#carfix').empty();
                			$("#carfix").append(html);
                		};
            });
            $(".ru-more").click(function(){
                $(this).find("a").toggleClass("active");
                $(this).find("i").toggleClass("fa-angle-down fa-angle-up")
                $(this).prev().toggleClass("hauto");
            })
        })
    </script>
	
</body>
</html>
