<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>虚拟园区</title>
<link href="../styles/page/awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet">
<link href="../styles/base.css" type="text/css" rel="stylesheet">
<link href="../styles/page/page.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../styles/page/zs.css">
<style>
	.czkj{background:url(../styles/images/zhyq/zckj.png) no-repeat;width:117px;height:36px;position:absolute;top:462px;left:585px;
		animation:my 1s infinite alternate;-webkit-animation:my 1s infinite alternate;}
@keyframes my
{
from {opacity:1;}
to {opacity:0;}
}

@-webkit-keyframes my
{
from {opacity:1;}
to {opacity:0;}
}
</style>
</head>

<body>
<div id="youi_page_header" class="youi-page-header clearfix" dataType="2" dataId="0"></div>
<!--***top end****************************************-->
<!--content-->
<!--*******************************************-->
<div class="w1200" style="margin-top:30px;position:relative">
	<img src="../styles/images/zhyq/2.jpg" style="width:100%"/>
    <div class="zznav">
    	<ul class="oh fl zzul">
        </ul>
        <!-- <div class="fl zz1"></div> -->
    </div>
	
	<div class="maskset">
		<div class="b1mask hide"><img src="../styles/images/zhyq/b1.png"/></div>
		<div class="b2mask hide"><img src="../styles/images/zhyq/b2.png"/></div>
		<div class="b2floor b2f1 hide"><img src="../styles/images/zhyq/b2f1.png" alt=""></div>
		<div class="b2floor b2f2 hide"><img src="../styles/images/zhyq/b2f2.png" alt=""></div>
		<div class="b2floor b2f3 hide"><img src="../styles/images/zhyq/b2f3.png" alt=""></div>
		<div class="b2floor b2f4 hide"><img src="../styles/images/zhyq/b2f4.png" alt=""></div>
		<div class="b2floor b2f5 hide"><img src="../styles/images/zhyq/b2f5.png" alt=""></div>
		<div class="b2floor b2f6 hide"><img src="../styles/images/zhyq/b2f6.png" alt=""></div>
		<div class="b2floor b2f7 hide"><img src="../styles/images/zhyq/b2f7.png" alt=""></div>
		<div class="b2floor b2f8 hide"><img src="../styles/images/zhyq/b2f8.png" alt=""></div>
		<div class="b2floor b2f9 hide"><img src="../styles/images/zhyq/b2f9.png" alt=""></div>
		
		<div class="b1floor b1f1 hide"><img src="../styles/images/zhyq/b1f1.png" alt=""></div>
		<div class="b1floor b1f2 hide"><img src="../styles/images/zhyq/b1f2.png" alt=""></div>
		<div class="b1floor b1f3 hide"><img src="../styles/images/zhyq/b1f3.png" alt=""></div>
		<div class="b1floor b1f4 hide"><img src="../styles/images/zhyq/b1f4.png" alt=""></div>
		<div class="b1floor b1f5 hide"><img src="../styles/images/zhyq/b1f5.png" alt=""></div>
		<div class="b1floor b1f6 hide"><img src="../styles/images/zhyq/b1f6.png" alt=""></div>
		<div class="b1floor b1f7 hide"><img src="../styles/images/zhyq/b1f7.png" alt=""></div>
	</div>
	<!--这里自己调用 页面加载动态效果-->	
	 <div class="clearfix undis" id="loading">
		<div id="contain">
		    <div class='wrap' id='wrap1'>
		    	<div class='part' id='part1'></div>
		    </div>
		    
		    <div class='wrap' id='wrap2'>
		    	<div class='part' id='part2'></div>
		    </div>
		    
		    <div class='wrap' id='wrap3'>
		    	<div class='part' id='part3'></div>
		    </div>
		    
		    <div class='wrap' id='wrap4'>
		    	<div class='part' id='part4'></div>
		    </div>
		</div>
	</div>				
	<div class="czkj"></div>
</div>
<!--*******************************************-->
    
<!--***bottom start****************************************-->
	<div id="youi_page_footer" class="youi-page-footer"></div>
<!--***bottom end****************************************-->
<!--******************  code end  ****************************-->
<script type="text/javascript" src="../scripts/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../scripts/lib/jquery-ui.min.js"></script>
<script type="text/javascript" src="../scripts/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="../scripts/lib/giui.min.js"></script>
<script type="text/javascript" src="../scripts/page/pagewrapper.js"></script>
<script type="text/javascript" src="../scripts/page/url.js"></script>
<script>
	$(function(){
		$(document).on("mouseover",".b",function(){
			var buildingId = $(this).parent().attr("id") ;
			findFloorList(buildingId) ;
		});	
		$(document).on("mouseover",".zzul .lin",function(){
			if($(this).index()==0){
				$(".b1mask").removeClass("hide");
			}else if($(this).index()==1){
				$(".b2mask").removeClass("hide");
			}
		});
		$(document).on("mouseout",".zzul .lin",function(){
			$(".b1mask").addClass("hide");
			$(".b2mask").addClass("hide");
			$(".b1floor").addClass("hide");
			$(".b2floor").addClass("hide");
		});
		$(document).on("mouseover",".maskset",function(){
			$(".b1mask").addClass("hide");
			$(".b2mask").addClass("hide");
			$(".b1floor").addClass("hide");
			$(".b2floor").addClass("hide");
			//$(".b1floor").eq(0).addClass("hide");
		});

		$(document).on("mouseover",".zzul .lin:eq(0) li",function(){
			var idx=$(this).index()+2;
			$(".b1floor").eq(idx).removeClass("hide").siblings().addClass("hide");
		});
		$(document).on("mouseover",".zzul .lin:eq(1) li",function(){
			var idx=$(this).index()+2;
			$(".b2floor").eq(idx).removeClass("hide").siblings().addClass("hide");
		});
	
	/* 	$(".zzul .b").eq(0).find("li").hover(function(){
			var idx=$(this).index();
			$(".b1floor").eq(idx).toggleClass("hide");
		});
		$(".zzul .b").eq(1).find("li").hover(function(){
			var idx=$(this).index();
			$(".b2floor").eq(idx).toggleClass("hide");
		}); */
	});
</script>

	<script type="text/javascript">
		$(".zznav").hide() ;
		$("#loading").removeClass("undis") ;
		 $(function(){
			var params = ["parkName=富春硅谷"];
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"bbmBuildingManager/getAllBuildingByParkName.json",//通过园区名称来获取该园区所有楼栋
				data:params.join('&'),
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(result){
					 if(result&&result.records){
						_parseRecords(result.records) ;
					} 
				}
			});
		}); 
		function _parseRecords(record){//record为楼栋的list
				for(var i=0;i<record.length;i++){
					var obj = record[i] ;
					var html = "<li class='lin' id="+obj.buildingId+"><a class='b' href='#'>"+obj.buildingName+"</a><ul class='subul'></ul></li>"
					$(".oh.fl.zzul").append(html);
				}
				$("#loading").addClass("undis") ;
				$(".zznav").show() ;
		} 
		function findFloorList(buildingId){
			var params = ["buildingId="+buildingId];
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"bbmFloorManager/getBbmFloorByBuildingId.json",
				data:params.join('&'),
				jsonp:'data:jsonp',
				dataType:'jsonp',
				success:function(result){
					if(result&&result.records){
						var html = appendHtml(result.records) ;
						$("#"+buildingId).find(".subul").empty();
						$("#"+buildingId).find(".subul").append(html) ;
					}
				}
			});
		}
		function appendHtml(record){
			var html = "";
			for(var i=0;i<record.length;i++){
				var obj = record[i] ;
				var num = obj.floorNo ;
				if(num == "1F" || num == "2F"){
					
				}else{
					html += "<li id="+obj.floorId+"><a href='wp_login.html?floorId="+obj.floorId+"'>"+obj.floorNo+"</a></li>" ;
				}
			}
			return html ;
		}
	</script>
</body>
</html>
