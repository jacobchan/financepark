<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>园区资讯</title>
	<link href="../styles/base.css" type="text/css" rel="stylesheet">
	<link href="../styles/page/awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../styles/page/zs.css">
	<script type="text/javascript" src="../scripts/lib/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../scripts/lib/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../scripts/lib/bootstrap.min.js"></script>
	<script type="text/javascript" src="../scripts/lib/giui.min.js"></script>
	<script type="text/javascript" src="../scripts/page/newscom.js"></script>
	<script type="text/javascript" src="../scripts/page/pagewrapper.js"></script>
	<script type="text/javascript" src="../scripts/page/right.js"></script>
	<script type="text/javascript" src="../scripts/page/url.js"></script>
	<script type="text/javascript" src="../scripts/page/jquery.page.js"></script>
</head>
<body>
	<!--***top start****************************************-->
	<div id="youi_page_header" class="youi-page-header clearfix"></div>
	<!--***top end****************************************-->
	<div class="w100">
		<div class="w1200 clearfix pt30 pb50">
			<div class="h-nav clearfix">
					<a href="../index.html">首页</a><img src="../styles/images/zs/right-j-b.png" border="0" />
					<a href="">招商中心</a><img src="../styles/images/zs/right-j-b.png" border="0" />
					<a href="" class="current">园区资讯</a>
			</div>

			<div class="fl w895">				
				<div class="park-nav clearfix">
					<ul class="ull">
					
					</ul>
				</div>
				<div class="park-box">
					<ul class='pb-list-group' id="01"></ul>
					<ul class='pb-list undis' id="02"></ul>
					<ul class='pb-list undis' id="03"></ul>
				</div>
				<div class="tcdPageCode fr" id="11"></div>
				<div class="tcdPageCode fr" id="22"></div>
				<div class="tcdPageCode fr" id="33"></div>
			</div>
			<!--这里自己调用 页面加载动态效果-->	
			 <div class="clearfix undis" id="loading">
				<div id="contain">
				    <div class='wrap' id='wrap1'>
				    	<div class='part' id='part1'></div>
				    </div>
				    <div class='wrap' id='wrap2'>
				    	<div class='part' id='part2'></div>
				    </div>
				    <div class='wrap' id='wrap3'>
				    	<div class='part' id='part3'></div>
				    </div>
				    <div class='wrap' id='wrap4'>
				    	<div class='part' id='part4'></div>
				    </div>
				</div>
			</div>				
			<div class="fr w285"><div id="youi_page_right" class="youi-page-right clearfix"></div></div>
		</div>
	</div>
	<!--***bottom start****************************************-->
	<div id="youi_page_footer" class="youi-page-footer"></div>
	<!--***bottom end****************************************-->
	<script type="text/javascript">
		/*$(".pb-list").filters({
			type:"policyType",
			val:0,
			template:'<a href="zs7.html?dataId={policyId}"><li>{policyCaption}<span class="fr">{policyIssueDate}</span></li></a>',
			jsonpSrc:'http://localhost:8081/jsonp/data.jsp?data:file=zs4-test.json'	
		});*/
		
	</script>
	
	<script type="text/javascript">
		$(function(){
			var params=["issueTypeCode=01"];
			$.youi.ajaxUtils.ajax({
				url:baseUrl +"nmIssuetypeManager/getNewsType.json",
				jsonp:'data:jsonp',
				data:params.join('&'),
				dataType:'jsonp',
				success:function(results){
					getList(results.records) ;
				}
			});
		});
		
		function getList(records){
			var len = records.length ;
			var html = "" ;
			for(var i=0;i<len;i++){
				var issueTypeCode = records[i].issueTypeCode ;
				var title = records[i].issueTypeCaption ;
				if(i == 0){
					html = "<li class='active' id="+issueTypeCode+">"+title+"</li>" ;
				}else{
					html = "<li id="+issueTypeCode+">"+title+"</li>" ;
				}
		 		$(".ull").append(html);
			}
		}
		
		$(function(){
			$("#loading").removeClass("undis") ;
			var pageSize=3;
		    var pageCount=1;
		    var serviceURL = baseUrl+"nmIssuenewsManager/getPagerAllPolicy.json?issueTypeCode=0101";
			$.youi.ajaxUtils.ajax({
 				url:serviceURL,
 				jsonp:'data:jsonp',
 				dataType:'jsonp',
 				success:function(results){
 					if(results.totalCount >0){
 						pageCount=Math.ceil(results.totalCount/pageSize);
 						refreshData(1,pageSize);
 						$("#11").createPage({
 						    pageCount:pageCount,
 						    current:1,
 						    backFn:function(p){
 						       this.pageCount=pageCount;
 						        refreshData(p,pageSize);
 						    }
 						});
 					}
 				}
 			});
				
	        function refreshData(pageIndex,pageSize){
	 			var params = ['pager:pageIndex='+pageIndex,'pager:pageSize='+pageSize];
	 			$.youi.ajaxUtils.ajax({
	 				url:serviceURL,
	 				jsonp:'data:jsonp',
	 				data:params.join('&'),
	 				dataType:'jsonp',
	 				success:function(results){
	 					if(results&&results.records){
	 						getHtml(results.records);
	 					}
	 				}
	 			});
	 		}
		         
	         function getHtml(newsList){
	         	$("#01").empty() ;
	         	$("#11").show() ;
	         	$("#22").hide() ;
	         	$("#33").hide() ;
	         	$("#loading").addClass("undis") ;
	         	for(var i=0;i<newsList.length;i++){
	         		var news = newsList[i] ;
	         		var temp = news.policyContent ;
	 				var start = temp.indexOf("<p>");
	 				var end = temp.indexOf("</p>");
	 				var content = temp.substring(start,end+4) ;
	 				var html = "<li>"+
				    				"<a href='zs7.html?policyId="+news.policyId+"'>"+
									'<div class="plg-photo">'+
										"<img src='"+cenUrl+"common/uploadImage.html?repository=/swfupload&path="+news.imageUrl+"&method=show' border='0' width='100%'>"+
									"</div>"+
						 			"<div class='plg-article'>"+
										"<a href='zs7.html?policyId="+news.policyId+"'><h3>"+news.policyCaption+"</h3>"+content+"</a>"+
										"</div>"+
									"</a>"+
								"</li>";
					$("#01").append(html) ;
	         	}
	 		}
		});
		$(function(){
			var pageSize=2;
		    var pageCount=1;
		    var serviceURL = baseUrl+"nmIssuenewsManager/getPagerAllPolicy.json?issueTypeCode=0102";
			$.youi.ajaxUtils.ajax({
 				url:serviceURL,
 				jsonp:'data:jsonp',
 				dataType:'jsonp',
 				success:function(results){
 					if(results.totalCount >0){
 						pageCount=Math.ceil(results.totalCount/pageSize);
 						refreshData(1,pageSize);
 						$("#22").createPage({
 						    pageCount:pageCount,
 						    current:1,
 						    backFn:function(p){
 						       this.pageCount=pageCount;
 						        refreshData(p,pageSize);
 						    }
 						});
 					}
 				}
 			});
				
	        function refreshData(pageIndex,pageSize){
	 			var params = ['pager:pageIndex='+pageIndex,'pager:pageSize='+pageSize];
	 			$.youi.ajaxUtils.ajax({
	 				url:serviceURL,
	 				jsonp:'data:jsonp',
	 				data:params.join('&'),
	 				dataType:'jsonp',
	 				success:function(results){
	 					if(results&&results.records){
	 						getHtml(results.records);
	 					}
	 				}
	 			});
	 		}
		         
	         function getHtml(newsList){
	         	$("#02").empty() ; 
	         	for(var i=0;i<newsList.length;i++){
	         		var news = newsList[i] ;
	 				var html = "<a href='zs7.html?policyId="+news.policyId+"'>"+
					 			 "<li>"+news.policyCaption+"<span class='fr'>"+news.policyIssueDate+"</span></li>"+
				  				"</a>";
					$("#02").append(html) ;
	         	}
	 		}
		});
		$(function(){
			var pageSize=2;
		    var pageCount=1;
		    var serviceURL = baseUrl+"nmIssuenewsManager/getPagerAllPolicy.json?issueTypeCode=0103";
			$.youi.ajaxUtils.ajax({
 				url:serviceURL,
 				jsonp:'data:jsonp',
 				dataType:'jsonp',
 				success:function(results){
 					if(results.totalCount >0){
 						pageCount=Math.ceil(results.totalCount/pageSize);
 						refreshData(1,pageSize);
 						$("#33").createPage({
 						    pageCount:pageCount,
 						    current:1,
 						    backFn:function(p){
 						       this.pageCount=pageCount;
 						        refreshData(p,pageSize);
 						    }
 						});
 					}
 				}
 			});
				
	        function refreshData(pageIndex,pageSize){
	 			var params = ['pager:pageIndex='+pageIndex,'pager:pageSize='+pageSize];
	 			$.youi.ajaxUtils.ajax({
	 				url:serviceURL,
	 				jsonp:'data:jsonp',
	 				data:params.join('&'),
	 				dataType:'jsonp',
	 				success:function(results){
	 					if(results&&results.records){
	 						getHtml(results.records);
	 					}
	 				}
	 			});
	 		}
		         
	         function getHtml(newsList){
	         	$("#03").empty() ; 
	         	for(var i=0;i<newsList.length;i++){
	         		var news = newsList[i] ;
	 				var html = "<a href='zs7.html?policyId="+news.policyId+"'>"+
					 			 "<li>"+news.policyCaption+"<span class='fr'>"+news.policyIssueDate+"</span></li>"+
				  				"</a>";
					$("#03").append(html) ;
	         	}
	 		}
		});
		
		$(document).on("click",".park-nav li",function(){
			$(".park-nav li").removeClass("active");
			$(this).addClass("active");
			$(".park-box ul").eq($(this).index()).removeClass("undis").siblings().addClass("undis");
			var issueTypeCode = $(this).attr("id") ;
			if(issueTypeCode == "0101"){
				$("#11").show() ;
				$("#22").hide() ;
				$("#33").hide() ;
			}
			if(issueTypeCode == "0102"){
				$("#11").hide() ;
				$("#22").show() ;
				$("#33").hide() ;
			}
			if(issueTypeCode == "0103"){
				$("#11").hide() ;
				$("#22").hide() ;
				$("#33").show() ;
			}
		});
	</script>
</body>
</html>